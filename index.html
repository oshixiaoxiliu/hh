<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/hh/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/hh/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/hh/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/hh/images/logo.svg" color="#222">

<link rel="stylesheet" href="/hh/css/main.css">


<link rel="stylesheet" href="/hh/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"oshixiaoxiliu.github.io","root":"/hh/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="hh的学习笔记">
<meta property="og:url" content="https://oshixiaoxiliu.github.io/hh/index.html">
<meta property="og:site_name" content="hh的学习笔记">
<meta property="og:locale">
<meta property="article:author" content="hh">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://oshixiaoxiliu.github.io/hh/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh'
  };
</script>

  <title>hh的学习笔记</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/hh/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">hh的学习笔记</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/hh/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/hh/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh">
    <link itemprop="mainEntityOfPage" href="https://oshixiaoxiliu.github.io/hh/2024/02/11/LangChain%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hh/images/avatar.gif">
      <meta itemprop="name" content="hh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hh的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/hh/2024/02/11/LangChain%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">Langchain学习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-02-11 15:24:00" itemprop="dateCreated datePublished" datetime="2024-02-11T15:24:00+08:00">2024-02-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-02-13 16:15:23" itemprop="dateModified" datetime="2024-02-13T16:15:23+08:00">2024-02-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="LangChain"><a href="#LangChain" class="headerlink" title="LangChain"></a>LangChain</h1><h2 id="LangChain是什么"><a href="#LangChain是什么" class="headerlink" title="LangChain是什么"></a>LangChain是什么</h2><p><strong>LangChain 是一种创新框架，正在彻底改变我们开发由语言模型驱动的应用程序的方式。</strong> 通过引入先进的原理，LangChain 正在重新定义传统 API 所能实现的限制。此外，LangChain 应用程序具有智能代理的特性，使语言模型能够与环境进行互动和自适应。</p>
<p>LangChain 由多个模块组成。正如其名称所示，<strong>LangChain 的主要目的是将这些模块进行链式连接</strong> 。这意味着我们可以将每个模块都串联在一起，并使用这个链式结构一次性调用所有模块。</p>
<p><strong>借助 LangChain，与大语言模型的交互变得更加便捷。</strong> LangChain 提供的接口和功能有助于将 LLM 的强大能力轻松集成到你的工作应用程序中。LangChain 利用 asyncio 库为 LLM 提供异步支持。</p>
<p>对于需要同时并发调用多个 LLM 的网络绑定场景，<strong>LangChain 还提供了异步支持</strong> 。通过释放处理请求的线程，服务器可以将其分配给其他任务，直到响应准备就绪，从而最大限度地提高资源利用率。</p>
<h2 id="LangChain模块"><a href="#LangChain模块" class="headerlink" title="LangChain模块"></a>LangChain模块</h2><p><img src="/hh/images/Langchain%E5%AD%A6%E4%B9%A0-20240211-153557450.png"></p>
<h3 id="Models"><a href="#Models" class="headerlink" title="Models"></a>Models</h3><p>LangChain 为许多不同的 LLM 提供了通用接口，可以直接通过 API 工作，但也可以运行本地模型。</p>
<ul>
<li>大型语言模型 LLM：将文本字符串作为输入，并返回文本字符串作为输出</li>
<li><strong>Chat Models：</strong> 将聊天消息列表作为输入，并返回聊天消息。</li>
<li><strong>Text Embedding Models：</strong> 将文本作为输入并返回一个浮点数组成的向量</li>
</ul>
<h4 id="LLMs"><a href="#LLMs" class="headerlink" title="LLMs"></a>LLMs</h4><p>LLMs 是 LangChain 的基础组成部分。它本质上是一个大型语言模型的包装器，可以通过该接口与各种大模型进行交互。LLMs 类的功能如下：</p>
<ul>
<li>支持多种模型接口，如 <a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/models/llms/integrations/openai.html">OpenAI</a>、<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/models/llms/integrations/huggingface_hub.html">Hugging Face Hub</a>、<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/models/llms/integrations/anthropic_example.html">Anthropic</a>、<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/models/llms/integrations/azure_openai_example.html">Azure OpenAI</a>、<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/models/llms/integrations/gpt4all.html">GPT4All</a>、<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/models/llms/integrations/llamacpp.html">Llama-cpp</a>…<ul>
<li>谷歌的 BERT</li>
<li>OpenAI 的 GPT-3</li>
<li>谷歌 LaMDA</li>
<li>谷歌 PaLM</li>
<li>Meta AI 的 LLaMA</li>
<li>OpenAI 的 GPT-4</li>
</ul>
</li>
<li>Fake LLM，用于测试</li>
<li>缓存的支持，比如 in-mem（内存）、SQLite、Redis、SQL</li>
<li>用量记录</li>
<li>支持流模式（就是一个字一个字的返回，类似打字效果）</li>
</ul>
<h4 id="Chat-Models"><a href="#Chat-Models" class="headerlink" title="Chat Models"></a>Chat Models</h4><h4 id="Text-Embedding-Models"><a href="#Text-Embedding-Models" class="headerlink" title="Text Embedding Models"></a>Text Embedding Models</h4><p>LangChain 中的基础 Embedding 类是设计用于与嵌入交互的类，它提供了两个方法：embed_documents和embed_query。最大的区别在于这两种方法具有不同的接口：一种处理多个文档，而另一种处理单个文档。</p>
<p>Embedding 类能够帮助我们实现基于知识库的问答和semantic search，相比 fine-tuning 最大的优势就是，不用进行训练，并且可以实时添加新的内容，而不用加一次新的内容就训练一次，并且各方面成本要比 fine-tuning 低很多。</p>
<p>文本嵌入模型集成了如下的源：<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/models/text_embedding/examples/azureopenai.html">AzureOpenAI</a>、<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/models/text_embedding/examples/huggingfacehub.html">Hugging Face Hub</a>、<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/models/text_embedding/examples/instruct_embeddings.html">InstructEmbeddings</a>、<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/models/text_embedding/examples/llamacpp.html">Llama-cpp</a>、<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/models/text_embedding/examples/openai.html">OpenAI</a> 等</p>
<h3 id="Prompts"><a href="#Prompts" class="headerlink" title="Prompts"></a>Prompts</h3><p>众所周知，提示（prompt）是我们向系统提供的输入，以便根据我们的使用案例对答案进行精确或特定的调整。许多时候，我们希望得到的不仅仅是文本，还需要更结构化的信息。<strong>基于对比预训练和零样本学习的许多新的目标检测和分类算法都将提示作为有效的输入来进行结果预测。</strong> 举例来说，OpenAI 的 CLIP 和 META 的 Grounding DINO 都使用提示作为预测的输入。</p>
<p><strong>在 LangChain 中，我们可以根据需要设置提示模板，并将其与主链相连接以进行输出预测。</strong> 此外，LangChain 还提供了输出解析器的功能，用于进一步精炼结果。输出解析器的作用是（1）指导模型输出的格式化方式，和（2）将输出解析为所需的格式（包括必要时的重试）。</p>
<p><strong>在 LangChain 中，我们可以提供提示模板作为输入。</strong> 模板指的是我们希望获得答案的具体格式或蓝图。LangChain 提供了预先设计好的提示模板，可以用于生成不同类型任务的提示。然而，在某些情况下，预设的模板可能无法满足你的需求。在这种情况下，我们可以使用自定义的提示模板。</p>
<h3 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h3><p>在 LangChain 中，链式和代理默认以无状态模式运行，即它们独立处理每个传入的查询。然而，在某些应用程序（如聊天机器人）中，保留先前的交互记录对于短期和长期都非常重要。这时就需要引入 “内存” 的概念。</p>
<p>LangChain 提供两种形式的内存组件。首先，LangChain 提供了辅助工具，用于管理和操作先前的聊天消息，这些工具设计成模块化的，无论用例如何，都能很好地使用。其次，LangChain 提供了一种简单的方法将这些工具集成到链式结构中，使其非常灵活和适应各种情况。</p>
<h3 id="Indexes"><a href="#Indexes" class="headerlink" title="Indexes"></a>Indexes</h3><p>索引指的是构建文档的方式，以便 LLM 可以最好地与它们交互。Indexes主要有 4 个主要组件：</p>
<ul>
<li><strong>文档加载器：</strong>如何从各种来源加载文档</li>
<li><strong>文本拆分器：</strong>拆分文本成多个chunk</li>
<li>VectorStores<strong>：</strong>对接向量存储与搜索，比如 <a target="_blank" rel="noopener" href="https://docs.trychroma.com/">Chroma</a>、Pinecone、Qdrand。默认情况下，LangChain 使用Chroma作为向量存储来索引和搜索嵌入</li>
<li>检索器<strong>：</strong></li>
</ul>
<h4 id="Document-Loaders-and-Utils"><a href="#Document-Loaders-and-Utils" class="headerlink" title="Document Loaders and Utils"></a>Document Loaders and Utils</h4><p>LangChain 的<strong>Document Loaders</strong>和<strong>Utils</strong>模块分别用于连接到数据源和计算源。<br>当使用loader加载器读取到数据源后，数据源需要转换成 <strong>Document</strong> 对象后，后续才能进行使用<br>The following document loaders are provided:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/csv.html">CSV Loader</a> CSV文件</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/dataframe.html">DataFrame Loader</a> 从 pandas 数据帧加载数据</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/diffbot.html">Diffbot</a> 从 URL 列表中提取 HTML 文档，并将其转换为我们可以在下游使用的文档格式</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/directory_loader.html">Directory Loader</a> 加载目录中的所有文档</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/evernote.html">EverNote</a> 印象笔记</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/git.html">Git</a> 从 Git 存储库加载文本文件</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/googledrive.html">Google Drive</a> Google网盘</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/html.html">HTML</a> HTML 文档</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/markdown.html">Markdown</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/notebook.html">Notebook</a> 将 .ipynb 笔记本中的数据加载为适合 LangChain 的格式</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/notion.html">Notion</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/pdf.html">PDF</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/powerpoint.html">PowerPoint</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/unstructured_file.html">Unstructured File Loader</a> 使用Unstructured加载多种类型的文件，目前支持加载文本文件、powerpoints、html、pdf、图像等</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/url.html">URL</a> 加载 URL 列表中的 HTML 文档内容</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders/examples/word_document.html">Word Documents</a></li>
</ul>
<p>更多的加载器可以看看<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/document_loaders.html">链接</a>。</p>
<h4 id="Text-Spltters"><a href="#Text-Spltters" class="headerlink" title="Text Spltters"></a>Text Spltters</h4><p>顾名思义，文本分割就是用来分割文本的。为什么需要分割文本？因为我们每次不管是做把文本当作 prompt 发给 openai api ，还是还是使用 embedding 功能都是有字符限制的。</p>
<p>比如我们将一份300页的 pdf 发给 openai api，让他进行总结，他肯定会报超过最大 Token 错。所以这里就需要使用文本分割器去分割我们 loader 进来的 Document。</p>
<ul>
<li>默认推荐的文本拆分器是 RecursiveCharacterTextSplitter。默认情况以 [“\n\n”, “\n”, “ “, “”] 字符进行拆分。其它参数说明：<code>length_function</code>如何计算块的长度。默认只计算字符数，但在这里传递令牌计数器是很常见的。<code>chunk_size</code>：块的最大大小（由长度函数测量）。<code>chunk_overlap</code>：块之间的最大重叠。有一些重叠可以很好地保持块之间的一些连续性（例如，做一个滑动窗口）</li>
<li>CharacterTextSplitter 默认情况下以 <code>separator=&quot;\n\n&quot;</code>进行拆分</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/text_splitters/examples/tiktoken_splitter.html">TiktokenText Splitter</a> 使用OpenAI 的开源分词器包来估计使用的令牌</li>
</ul>
<h4 id="Vectorstores"><a href="#Vectorstores" class="headerlink" title="Vectorstores"></a>Vectorstores</h4><p>因为数据相关性搜索其实是向量运算。所以，不管我们是使用 openai api embedding 功能还是直接通过 向量数据库 直接查询，都需要将我们加载进来的数据 <code>Document</code> 进行向量化，才能进行向量运算搜索。转换成向量也很简单，只需要我们把数据存储到对应的向量数据库中即可完成向量的转换。</p>
<p>官方也提供了很多的向量数据库供我们使用，包括：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/vectorstores/examples/annoy.html">Annoy</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/vectorstores/examples/chroma.html">Chroma</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/vectorstores/examples/elasticsearch.html">ElasticSearch</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/vectorstores/examples/faiss.html">FAISS</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/vectorstores/examples/milvus.html">Milvus</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/vectorstores/examples/pgvector.html">PGVector</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/vectorstores/examples/pinecone.html">Pinecone</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/vectorstores/examples/redis.html">Redis</a></li>
</ul>
<p>更多支持的向量数据库使用方法，可转至<a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/vectorstores.html">链接</a>。</p>
<h4 id="Retrievers"><a href="#Retrievers" class="headerlink" title="Retrievers"></a>Retrievers</h4><p>检索器接口是一个通用接口，可以轻松地将文档与语言模型结合起来。此接口公开了一个 get_relevant_documents 方法，该方法接受一个查询（一个字符串）并返回一个文档列表。</p>
<p>一般来说，用的都是 <a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/indexes/retrievers/examples/vectorstore-retriever.html">VectorStore Retriever</a>。顾名思义，此检索器由 VectorStore 大力支持。一旦你构造了一个 VectorStore，构造一个检索器就很容易了。</p>
<h3 id="Chains"><a href="#Chains" class="headerlink" title="Chains"></a>Chains</h3><p>Chain 可以根据特定任务将 LLM 调用链接在一起。例如，您可能需要从特定 URL 获取数据，总结返回的文本，并使用生成的摘要回答问题。链允许我们将多个组件组合在一起以创建一个单一的、连贯的应用程序。例如，我们可以创建一个接受用户输入的链，使用 PromptTemplate 对其进行格式化，然后将格式化后的响应传递给 LLM。我们可以通过将多个链组合在一起，或者通过将链与其他组件组合来构建更复杂的链。</p>
<ul>
<li>LLMChain: <ul>
<li><strong>LLMChain 被认为是查询 LLM 对象最常用的方法之一。</strong> 它根据提示模板将提供的输入键值和内存键值（如果存在）进行格式化，然后将格式化后的字符串发送给 LLM，LLM 生成并返回输出结果。</li>
</ul>
</li>
<li>各种工具Chain</li>
<li>LangChainHub</li>
</ul>
<h3 id="Agents"><a href="#Agents" class="headerlink" title="Agents"></a>Agents</h3><p>我们提到“链”可以帮助将一系列 LLM 调用链接在一起。然而，在某些任务中，调用顺序通常是不确定的。下一步可能取决于用户输入和前面步骤中的响应。</p>
<p>对于此类应用程序，LangChain 库提供了代理“Agents”，它们可以根据未知的输入而不是硬编码来决定下一步采取的行动。 执行过程可以参考下面这张图:</p>
<p><img src="/hh/images/Langchain%E5%AD%A6%E4%B9%A0-20240211-234101477.png"></p>
<p>agent 使用LLM来确定要采取哪些行动以及按什么顺序采取的行动。操作可以使用工具并观察其输出，也可以返回用户。创建agent时的参数：</p>
<ul>
<li>工具：执行特定职责的功能。比如：Google搜索，数据库查找，Python Repl。工具的接口当前是一个函数，将字符串作为输入，字符串作为输出。</li>
<li>LLM：为代理提供动力的语言模型。</li>
<li>代理：highest level API、custom agent</li>
</ul>
<p>根据文档，代理的高级伪代码大致如下：</p>
<ol>
<li>接收用户输入。</li>
<li>代理根据输入决定是否使用某个工具，以及该工具的输入应该是什么。</li>
<li>调用该工具，并记录观测结果（即使用该工具和输入调用后得到的输出）。</li>
<li>将工具、工具输入和观测结果的历史传递回代理，代理决定下一步应该采取的步骤。</li>
<li>重复上述步骤，直到代理决定不再需要使用工具，然后直接向用户作出回应。<br>这个过程会一直重复，直到代理决定不再需要使用工具，然后直接回应用户。</li>
</ol>
<p><img src="/hh/images/Langchain%E5%AD%A6%E4%B9%A0-20240211-235542092.png"></p>
<h4 id="Tools"><a href="#Tools" class="headerlink" title="Tools"></a>Tools</h4><p>工具是代理可以用来与世界交互的功能。这些工具可以是通用实用程序（例如搜索）、其他链，比如：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/tools/examples/bash.html">Bash</a> 在终端中执行命令。输入应该是有效的命令，输出将是运行该命令的任何输出。</li>
<li><a target="_blank" rel="noopener" href="https://apify.com/">Apify</a> 一个用于网络抓取和数据提取的云平台</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/tools/examples/bing_search.html">Bing Search</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/tools/examples/google_search.html">Google Search</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/tools/examples/human_tools.html">Human as a tool</a> 人类是 AGI，当 AI 代理感到困惑时会进行询问</li>
<li>LLM-MATH 对于您需要回答数学问题时有用。</li>
<li>Open-Meteo-Api 对于您想从OpenMeteo API获取天气信息时很有用。</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/tools/examples/python.html"><strong>Python REPL</strong></a> <strong>使用它来执行 python 命令。输入应该是有效的 python 命令</strong></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/tools/examples/requests.html"><strong>Requests</strong></a> <strong>当您需要从站点获取特定内容时使用它。输入应该是一个特定的 url，输出将是该页面上的所有文本。</strong></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/tools/examples/serpapi.html"><strong>SerpAPI</strong></a> <strong>一个搜索引擎。当您需要回答有关时事的问题时很有用。输入应该是搜索查询。</strong></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/tools/examples/wikipedia.html">Wikipedia API</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/tools/examples/wolfram_alpha.html">Wolfram Alpha</a> 当您需要回答有关数学、科学、技术、文化、社会和日常生活的问题时很有用。输入应该是搜索查询。</li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/en/latest/modules/agents/tools/examples/zapier.html">Zapier Natural Language Actions API</a> 可以通过自然语言 API 接口访问 Zapier 平台上的 5k+ 应用程序和 20k+ 操作</li>
</ul>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><h2 id="chat-model-是什么？"><a href="#chat-model-是什么？" class="headerlink" title="chat model 是什么？"></a>chat model 是什么？</h2><p>聊天模型是语言模型的一种变体。 虽然聊天模型在内部使用语言模型，但它们公开的接口略有不同。 它们不是公开“文本输入，文本输出”API，而是公开一个接口，其中“聊天消息”是输入和输出。</p>
<p>聊天模型API是相当新的，因此我们仍在探索正确的抽象。</p>
<h2 id="Agent具体是怎么实现的？"><a href="#Agent具体是怎么实现的？" class="headerlink" title="Agent具体是怎么实现的？"></a>Agent具体是怎么实现的？</h2><p>&#x3D;&#x3D;<strong>代理使用LLM（语言模型)来确定应采取哪些操作以及以何顺序执行这些操作</strong>&#x3D;&#x3D;。<br>动作可能是使用工具并观察其输出，或向用户返回响应。<br>以下是LangChain中可用的代理：</p>
<ul>
<li><code>zero-shot-react-description</code> 此代理使用ReAct框架，&#x3D;&#x3D;仅基于工具的描述来确定要使用的工具。&#x3D;&#x3D;<ul>
<li><em>Zero-shot</em> 意味着代理 (Agents) 仅在当前操作上起作用——它没有 <em>记忆_。它使用 <em>ReAct</em> 框架根据工具的 <code>描述 description</code> 来决定使用哪个工具。可以将其视为 LLM 可以循环进行</em> <em>Re</em> <em>asoning 和</em> <em>Act</em> _ion 步骤的过程。它启用了一个多步骤的过程来识别答案。</li>
</ul>
</li>
<li><code>react-docstore</code> 这个代理使用ReAct框架与文档存储进行交互。</li>
</ul>
<p>相关材料</p>
<ul>
<li>重要论文 ReAct： <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/624003116">ReAct论文解读：LLM ReAct范式，在大语言模型中结合推理和动作 - 知乎 (zhihu.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://react-lm.github.io/">ReAct: Synergizing Reasoning and Acting in Language Models (react-lm.github.io)</a></li>
<li>agent 的prompt模板<br><img src="/hh/images/Langchain%E5%AD%A6%E4%B9%A0-20240212-001422861.png"></li>
</ul>
<h2 id="Agent-示例"><a href="#Agent-示例" class="headerlink" title="Agent 示例"></a>Agent 示例</h2><h4 id="自主代理-Autonomous-agents"><a href="#自主代理-Autonomous-agents" class="headerlink" title="自主代理 Autonomous_agents"></a>自主代理 Autonomous_agents</h4><p>自主代理是旨在更长期运行的代理。 您向它们提供一个或多个长期目标，它们会独立地朝着这些目标执行。 应用程序结合了工具使用和长期记忆。<br>目前，自主代理还处于相对实验性阶段，基于其他开源项目。<br>通过在LangChain原语中实现这些开源项目，我们可以获得LangChain的好处，包括易于切换和尝试多个LLM、使用不同的向量存储器作为内存、使用LangChain的工具集。</p>
<h6 id="Baby-AGI-Original-Repo-opens-in-a-new-tab"><a href="#Baby-AGI-Original-Repo-opens-in-a-new-tab" class="headerlink" title="Baby AGI( Original Repo(opens in a new tab) )"></a>Baby AGI( <a target="_blank" rel="noopener" href="https://github.com/yoheinakajima/babyagi">Original Repo(opens in a new tab)</a> )<a target="_blank" rel="noopener" href="https://www.langchain.asia/use_cases/autonomous_agents#baby-agioriginal-repo"></a></h6><ul>
<li><a target="_blank" rel="noopener" href="https://www.langchain.asia/use_cases/autonomous_agents/baby_agi">Baby AGI</a>: 一份教程实现了使用LLM Chains的BabyAGI.</li>
<li><a target="_blank" rel="noopener" href="https://www.langchain.asia/use_cases/autonomous_agents/baby_agi_with_agent">Baby AGI with Tools</a>:在以上教程的基础上构建，这个例子使用了具有执行工具的代理，从而使其实际执行行动。</li>
</ul>
<h6 id="AutoGPT-Original-Repo-opens-in-a-new-tab"><a href="#AutoGPT-Original-Repo-opens-in-a-new-tab" class="headerlink" title="AutoGPT( Original Repo(opens in a new tab) )"></a>AutoGPT( <a target="_blank" rel="noopener" href="https://github.com/Significant-Gravitas/Auto-GPT">Original Repo(opens in a new tab)</a> )<a target="_blank" rel="noopener" href="https://www.langchain.asia/use_cases/autonomous_agents#autogptoriginal-repo"></a></h6><ul>
<li><a target="_blank" rel="noopener" href="https://www.langchain.asia/use_cases/autonomous_agents/autogpt">AutoGPT</a>: 一份使用LangChain基元实现AutoGPT的教程。</li>
<li><a target="_blank" rel="noopener" href="https://www.langchain.asia/use_cases/autonomous_agents/marathon_times">WebSearch Research Assistant</a>: 一份教程，展示了如何使用AutoGPT加上特定的工具作为研究助手，可以使用网络进行搜索。</li>
</ul>
<h6 id="MetaPrompt-Original-Repo-opens-in-a-new-tab"><a href="#MetaPrompt-Original-Repo-opens-in-a-new-tab" class="headerlink" title="MetaPrompt( Original Repo(opens in a new tab) )"></a>MetaPrompt( <a target="_blank" rel="noopener" href="https://github.com/ngoodman/metaprompt">Original Repo(opens in a new tab)</a> )<a target="_blank" rel="noopener" href="https://www.langchain.asia/use_cases/autonomous_agents#metapromptoriginal-repo"></a></h6><ul>
<li><a target="_blank" rel="noopener" href="https://www.langchain.asia/use_cases/autonomous_agents/meta_prompt">Meta-Prompt</a>: 一份使用LangChain基元实现Meta-Prompt的教程。</li>
</ul>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><ul>
<li><a target="_blank" rel="noopener" href="https://www.langchain.asia/">LangChain中文网: 500页超详细中文文档教程，助力LLM&#x2F;chatGPT应用开发</a></li>
<li><a target="_blank" rel="noopener" href="https://ningshixian.github.io/2023/04/18/2023-04-18-LangChain%20%E5%AE%9E%E6%88%98/">LangChain 实战 - 神的个人博客 (ningshixian.github.io)</a></li>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/docs/get_started/introduction">Introduction | 🦜️🔗 Langchain</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/UnyVoUHEuPBtL5T4vfr2lg">很火的 LangChain 是个什么东东？ (qq.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://cookbook.langchain.com.cn/docs/langchain-agents/">超能力对话代理 (Agents) 的超级 LLMs | 🦜️🔗 Langchain</a></li>
<li>&#x3D;&#x3D;<a target="_blank" rel="noopener" href="https://react-lm.github.io/">ReAct: Synergizing Reasoning and Acting in Language Models (react-lm.github.io)</a>&#x3D;&#x3D;</li>
</ul>
<h1 id="工具包"><a href="#工具包" class="headerlink" title="工具包"></a>工具包</h1><ul>
<li>Gradio  快速创建web应用</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh">
    <link itemprop="mainEntityOfPage" href="https://oshixiaoxiliu.github.io/hh/2024/02/11/create-a-blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hh/images/avatar.gif">
      <meta itemprop="name" content="hh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hh的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/hh/2024/02/11/create-a-blog/" class="post-title-link" itemprop="url">obsidian + hexo + github pages 搭建博客系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2024-02-11 00:06:28 / Modified: 00:43:49" itemprop="dateCreated datePublished" datetime="2024-02-11T00:06:28+08:00">2024-02-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="本地笔记系统-obsidian"><a href="#本地笔记系统-obsidian" class="headerlink" title="本地笔记系统 obsidian"></a>本地笔记系统 obsidian</h2><p>方便整理笔记，需要有一套本地笔记系统，多种软件对比后，选择使用obsidian，有以下优势</p>
<ul>
<li>开源免费，插件多，社区活跃</li>
<li>保存格式为md文本，方便同步云端和以后的迁移</li>
<li>还有一些其他文档、图片相互链接这些能力<br>当然少不了要折腾各种功能和插件</li>
</ul>
<h2 id="博客系统"><a href="#博客系统" class="headerlink" title="博客系统"></a>博客系统</h2><p>考虑到可以把一些读书笔记分享出来，选择使用hexo 来搭建轻量的博客系统。可以自动产出静态站点，部署在github pages上，不需要操心服务器和域名</p>
<ul>
<li>hexo 入门： <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/">Hexo</a></li>
<li>简单命令<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 创建博客</span></span><br><span class="line">- npm install hexo-cli -g</span><br><span class="line">- hexo init blog</span><br><span class="line">- <span class="built_in">cd</span> blog</span><br><span class="line">- npm install</span><br><span class="line">- hexo server</span><br><span class="line"></span><br><span class="line"><span class="comment">## 写作</span></span><br><span class="line">hexo new testmarkdown</span><br><span class="line">hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="写作流程"><a href="#写作流程" class="headerlink" title="写作流程"></a>写作流程</h2><ul>
<li>现在hexo 目录新建页面</li>
<li>然后再obsidian 完成笔记</li>
<li>然后生成和发布即可</li>
</ul>
<h2 id="一些配置点"><a href="#一些配置点" class="headerlink" title="一些配置点"></a>一些配置点</h2><ul>
<li>云盘同步问题： <ul>
<li>需要同步的都放到同步目录下，然后软连接到使用目录</li>
</ul>
</li>
<li>obsidian 和 hexo 同步问题<ul>
<li>markdown文件同步：obsidian 库中新建myblog，软连接到source&#x2F;_posts</li>
<li>图片同步：<ul>
<li>obsidian 库中新建图片目录images，软连接到source&#x2F;images</li>
<li>使用wiki 链接： 这个关闭，保持与markdown一样的图片插入语法，方便直接在hexo中使用 </li>
<li>附件默认存放位置，设置为images目录</li>
<li><img src="/hh/images/create-a-blog-20240211-001622351.png"></li>
<li>TODO： images文件太多怎么办</li>
</ul>
</li>
<li>图片重命名：截图贴到obsidian的文件名<ul>
<li>第三方插件 paste image rename </li>
<li><img src="/hh/images/create-a-blog-20240211-001858629.png"></li>
<li>TODO： 其他文件重命名怎么办</li>
</ul>
</li>
</ul>
</li>
<li>github pages 发布问题<ul>
<li>github pages 开通参考 <a target="_blank" rel="noopener" href="https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site">Creating a GitHub Pages site - GitHub Docs</a> </li>
<li>参考 <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/one-command-deployment">部署 | Hexo</a> 一键部署</li>
<li>hexo 中 设置_config.yml<ul>
<li>url 设置为对应的github.io域名</li>
<li>deploy配置</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:USERNAME/REPONAME.git</span><br><span class="line">  branch: gh-pages</span><br><span class="line">  message: deploy-git</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">hh</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/hh/archives/">
        
          <span class="site-state-item-count">2</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hh</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/hh/lib/anime.min.js"></script>
  <script src="/hh/lib/velocity/velocity.min.js"></script>
  <script src="/hh/lib/velocity/velocity.ui.min.js"></script>

<script src="/hh/js/utils.js"></script>

<script src="/hh/js/motion.js"></script>


<script src="/hh/js/schemes/muse.js"></script>


<script src="/hh/js/next-boot.js"></script>




  















  

  

</body>
</html>
